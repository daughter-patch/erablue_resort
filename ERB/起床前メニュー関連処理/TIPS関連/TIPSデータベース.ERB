@TIPSデータベースセット

DT_CREATE "TIPSデータベース"

DT_COLUMN_ADD "TIPSデータベース", "閲覧済フラグ", 1, 0
DT_COLUMN_OPTIONS "TIPSデータベース", "閲覧済フラグ", DEFAULT, 0

DT_COLUMN_ADD "TIPSデータベース", "関数キー", 5, 0

;初期からあるTIPSの追加
DT_ROW_ADD "TIPSデータベース", "関数キー", "TIPS_初期_1"
DT_ROW_ADD "TIPSデータベース", "関数キー", "TIPS_初期_2"
DT_ROW_ADD "TIPSデータベース", "関数キー", "TIPS_初期_3"
DT_ROW_ADD "TIPSデータベース", "関数キー", "TIPS_初期_4"
DT_ROW_ADD "TIPSデータベース", "関数キー", "TIPS_初期_5"
DT_ROW_ADD "TIPSデータベース", "関数キー", "TIPS_初期_6"


@TIPS番号取得(関数キー)
#FUNCTION
#DIMS 関数キー
#DIM TIPS番号

FOR TIPS番号, 0, DT_ROW_LENGTH("TIPSデータベース")
	SIF DT_CELL_GETS("TIPSデータベース", TIPS番号, "関数キー") == 関数キー
		RETURNF TIPS番号
NEXT
RETURNF -1


@TIPS追加(関数キー)
#DIMS 関数キー
#DIM TIPS番号

TIPS番号 = TIPS番号取得(関数キー)
SIF TIPS番号 >= 0
	RETURN TIPS番号

DT_ROW_ADD "TIPSデータベース", "関数キー", 関数キー
RETURN DT_ROW_LENGTH("TIPSデータベース") - 1


@TIPS文章取得(TIPS番号, タイトル受渡し, 文章受渡し)
#FUNCTION
#DIM TIPS番号
#DIMS REF タイトル受渡し
#DIMS REF 文章受渡し, 0
#DIM NEWフラグ

NEWフラグ = 0
IF DT_CELL_GET("TIPSデータベース", TIPS番号, "閲覧済フラグ") == 0
	DT_ROW_SET "TIPSデータベース", DT_CELL_GET("TIPSデータベース", TIPS番号, "id"), "閲覧済フラグ", 1
	NEWフラグ = 1
ENDIF

CALLFORMF %DT_CELL_GETS("TIPSデータベース", TIPS番号, "関数キー")%(タイトル受渡し, 文章受渡し)
RETURNF NEWフラグ


@TIPSランダム選出()
#FUNCTION
#DIM 未読カウント
#DIM 未読選出候補, 100
#DIM TIPS番号

;未読のTIPSがあるか検索
未読カウント = 0
FOR TIPS番号, 0, DT_ROW_LENGTH("TIPSデータベース")
	SIF DT_CELL_GET("TIPSデータベース", TIPS番号, "閲覧済フラグ") == 0
		未読選出候補:(未読カウント++) = TIPS番号
	;要素溢れ対策
	SIF 未読カウント >= VARSIZE("未読選出候補")
		BREAK
NEXT

;未読のものがあればそれが優先
SIF 未読カウント > 0
	RETURNF 未読選出候補:RAND(未読カウント)

;なければ全てからランダム
RETURNF RAND(DT_ROW_LENGTH("TIPSデータベース"))


@TIPS_初期_1(タイトル受渡し, 文章受渡し)
#FUNCTION
#DIMS REF タイトル受渡し
#DIMS REF 文章受渡し, 0

;長さ目安       = --------------------------------------------------------------------------------------------------
;タイトル受渡し = 

;長さ目安    = ------------------------------------------------------------------------------------------------------------------
文章受渡し:0 = 探索は現在表示されている起床前メニューからと、起床後に玄関まで移動してから行う方法があります。
文章受渡し:1 = 内容に違いはありませんが、玄関から出発すると時間を消費します。
文章受渡し:2 = 起床前メニューから行う方がお得です。
;文章受渡し:3 = 
;文章受渡し:4 = 
;文章受渡し:5 = 


@TIPS_初期_2(タイトル受渡し, 文章受渡し)
#FUNCTION
#DIMS REF タイトル受渡し
#DIMS REF 文章受渡し, 0

;長さ目安       = --------------------------------------------------------------------------------------------------
;タイトル受渡し = 

;長さ目安    = ------------------------------------------------------------------------------------------------------------------
文章受渡し:0 = バリアントの開発は主にDiscordで行われています。
文章受渡し:1 = 雑談だけ参加やROM専などでも歓迎です。お気軽に参加ください。
;文章受渡し:2 = 
;文章受渡し:3 = 
;文章受渡し:4 = 
;文章受渡し:5 = 


@TIPS_初期_3(タイトル受渡し, 文章受渡し)
#FUNCTION
#DIMS REF タイトル受渡し
#DIMS REF 文章受渡し, 0

;長さ目安       = --------------------------------------------------------------------------------------------------
;タイトル受渡し = 

;長さ目安    = ------------------------------------------------------------------------------------------------------------------
文章受渡し:0 = 沿岸部の森の奥にいるストーンイーターは、一度討伐した後も繰り返し戦うことが出来ます。
文章受渡し:1 = ランダムな下級の指輪や火の耳飾りを入手出来るので、装備が整うまで毎日殴っておくといいでしょう。
文章受渡し:2 = 他のダンジョンボスも、再討伐によってアイテムが手に入ることが多いです。
;文章受渡し:3 = 
;文章受渡し:4 = 
;文章受渡し:5 = 


@TIPS_初期_4(タイトル受渡し, 文章受渡し)
#FUNCTION
#DIMS REF タイトル受渡し
#DIMS REF 文章受渡し, 0

;長さ目安       = --------------------------------------------------------------------------------------------------
;タイトル受渡し = 

;長さ目安    = ------------------------------------------------------------------------------------------------------------------
文章受渡し:0 = リゾートの人気は日々の収入に直結する重要ステータスです。
文章受渡し:1 = 広告を積極的に出したり、雑務ゲージを貯めないよう多めに従業員を割り振るといいでしょう。
;文章受渡し:2 = 
;文章受渡し:3 = 
;文章受渡し:4 = 
;文章受渡し:5 = 


@TIPS_初期_5(タイトル受渡し, 文章受渡し)
#FUNCTION
#DIMS REF タイトル受渡し
#DIMS REF 文章受渡し, 0

;長さ目安       = --------------------------------------------------------------------------------------------------
;タイトル受渡し = 

;長さ目安    = ------------------------------------------------------------------------------------------------------------------
文章受渡し:0 = 人気度はリゾートの充実度によって上限が定められています。
文章受渡し:1 = 広告出しても人気度上がらないな？　と思ったら施設の開発を進めてみてください。
;文章受渡し:2 = 
;文章受渡し:3 = 
;文章受渡し:4 = 
;文章受渡し:5 = 


@TIPS_初期_6(タイトル受渡し, 文章受渡し)
#FUNCTION
#DIMS REF タイトル受渡し
#DIMS REF 文章受渡し, 0

;長さ目安       = --------------------------------------------------------------------------------------------------
;タイトル受渡し = 

;長さ目安    = ------------------------------------------------------------------------------------------------------------------
文章受渡し:0 = 射精先の選択が煩わしい時はオート射精先設定をどうぞ。
文章受渡し:1 = ・OPTION > 機能切り替え > その他機能切り替え > オート射精設定
文章受渡し:2 = ・日中行動画面で[射精先設定]
文章受渡し:3 = のどちらかから設定に入ることが可能です。
;文章受渡し:4 = 
;文章受渡し:5 = 
